this.analytics=this.analytics||{},this.analytics.js=function(e){"use strict";function t(e,t){if(0==e.length)return[];for(var n=[],a=0;a<e.length;a++){var o=e[a];t(o)&&n.push(o)}return n}function n(e,t,n){var a="";if(n){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3),a="; expires="+o.toUTCString()}document.cookie=e+"="+t+a+"; path=/"}function a(e,t,n){var a="";if(n){var o=new Date;o.setTime(o.getTime()+60*n*60*1e3),a="; expires="+o.toUTCString()}document.cookie=e+"="+t+a+"; path=/"}function o(e){for(var t=e+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){for(var o=n[a];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return null}function r(e){return null==e}var i,u=(i=r,function(e){return!i(e)});var s=0,_="_amazon_pay_analytics_jsonp_callback";var c="sandbox",d=new RegExp("^[a-z-]*(fe|jp)[a-z.-]*$"),l=new RegExp("^[a-z-]*(eu|uk|de)[a-z.-]*$"),f="https://",p=function(e,t){for(var n=[],a=e.length,o=0;o<a;o++){var r=e[o];n.push(t(r))}return n}(["payments","payments-eu","payments-sandbox","payments-eu-sandbox","payments-fe","pmt.integ","payments-eu.integ","payments-fe.integ","payments-preprod","payments-eu-preprod-dub.dub.proxy","payments-jp-preprod"],function(e){return"https://"+e+".amazon.com/checkout/signin"});function T(e){return!!e&&p.indexOf(e.action)>=0}function m(e,n){if(e){var a=t(Array.prototype.slice.call(e.querySelectorAll("input[type=hidden]")),function(e){return e.name==n})[0];if(a)return a.value}return"unknown"}function E(e){return T(e)?(t=e.action,(n=document.createElement("a")).href=t,n.hostname):null;var t,n}function h(e){return l.test(e)?"UK":d.test(e)?"JP":"US"}function g(e){return l.test(e)?"GBP":d.test(e)?"JPY":"USD"}function N(e){var t=m(e,c);return"unknown"!=t&&"true"==t}function A(e){for(var n=0,a=function(e){var n;return e?e instanceof HTMLElement&&(n=e.querySelectorAll("form")):n=document.querySelectorAll("form"),n?t(Array.prototype.slice.call(n),T):[]}(e);n<a.length;n++){var o=a[n];if(T(o))return o}return null}var O=[],I="/gp/widgets/sessionstabilizer",v="apay-session-set",y="true",S=365,U=!1;function C(){var e,t=A();if(t){var n=E(t);if(n)return""+f+n+I+"?"+(e={countryOfEstablishment:h(n),ledgerCurrency:g(n),isSandbox:N(t)},Object.keys(e).map(function(t){return r(e[t])?null:t+"="+encodeURIComponent(e[t])}).filter(u).join("&"))}return null}function R(e,t){if(null!=o(v))e();else if(O.push(e),!U){var a=t||C();U=!0,a&&function(e,t){void 0===t&&(t={});var n=""+_+ ++s,a=t.onSuccess||function(){},o=t.onTimeout||function(){},r=t.timeout||10,i=window.setTimeout(function(){window[n]=function(){},o()},1e3*r);window[n]=function(e){window.clearTimeout(i),a(e)};var u=document.createElement("script");u.type="text/javascript",u.async=!0,u.src=e,t.onLoad&&(u.onload=t.onLoad),document.getElementsByTagName("head")[0].appendChild(u)}(a,{onLoad:function(){U=!1,n(v,y,S);for(var e=O.pop();e;)e(),e=O.pop()}})}}var D={HTML_BUTTON_RENDER:"apay-html-button-render",HTML_BUTTON_RENDER_TAG:"pwa",SUB_PAGE_TYPE:"sub-page-type",CSS_BUTTON:"css_button",PAGE_ACTION:"page-action",ADDITIONAL_REQUEST_DATA:"additional-request-data",MERCHANT_DOMAIN_KEY:"window",SESSION_ID:"session-id",CORS_FAILURE:"cors-failure",INVALID_RESPONSE:"invalid-response",LATENCY:"cookie-creation-latency",MAXO_BUTTON:"maxo-button",MAXO_BUTTON_RENDER:"maxo-button-render",MAXO_BUTTON_REDIRECT:"maxo-button-redirect",MAXO_BUTTON_CLICK:"maxo-button-click",MAXO_BUTTON_TAG:"maxo-button-tag",MAXO_BUTTON_RENDER_LATENCY:"maxo-button-render-latency",MAXO_BUTTON_REDIRECT_LATENCY:"maxo-button-redirect-latency",MAXO_BUTTON_DESIGN:"button-design",MAXO_BUTTON_COLOR:"color",BUTTON_PLACEMENT:"button-placement",CHECKOUT_SESSION_PRODUCT_TYPE:"checkout-session-product-type",CHANGE_SHIPPING_ADDRESS:"change-shipping-address",CHANGE_PAYMENT_METHOD:"change-payment-method",CHECKOUT_SESSION_ID:"checkout-session-id",MAXO_ADDITIONAL_INFO:"maxo-additional-info",INTEGRATION_TYPE:"integration-type",MAXO_DEFAULT_INTEGRATION:"maxo-default-integration",SIGNATURE_BUTTON_SESSION_CONFIG:"maxo-button-signature-session-config",SIGNATURE_BUTTON_OBJECT:"maxo-button-signature-object",SIGNATURE_BUTTON_REDIRECT:"maxo-button-signature-redirect",WEBLAB_DATA:"weblab-data",MAXO_BUTTON_VIEW_INITIATED:"maxo-button-view-initiated",VIEW_TYPE:"viewType"},b=function(e,t,a,r,i){var u="https://"+t+"/cs/uedata",s=function(){var t,s,_=function(e,t,n,a){void 0===n&&(n=!0),void 0===a&&(a=!0);var o=new XMLHttpRequest;if("withCredentials"in o)o.open(e,t,a),o.withCredentials=n;else{if("undefined"==typeof XDomainRequest)return null;(o=new XDomainRequest).open(e,t)}return o}("POST",u,!0);_&&(i||(t=e,s={name:D.SESSION_ID,value:o(D.SESSION_ID)},t.addInfo(s)),_.setRequestHeader("Content-type","application/x-www-form-urlencoded"),_.onload=function(){},_.send(e.toQueryString()+"&countryOfEstablishment="+a+"&ledgerCurrency="+r),_.onerror=function(){_&&0===_.status&&!o("amazon-pay-cors-blocked-status")&&navigator.userAgent.match(/Firefox/i)&&n("amazon-pay-cors-blocked-status","true",1/24)},_&&4===_.readyState&&200===_.status&&e.reset())};!0===i?s():R(s)};var B,w,L=function(){function e(e,t){this.merchantId=e,this.metrics={counters:[],timings:[],info:[]},this.metricsPublisher=t}return e.prototype.addCounter=function(e){this.metrics.counters.push(e)},e.prototype.addTiming=function(e){this.metrics.timings.push(e)},e.prototype.addInfo=function(e){this.metrics.info.push(e)},e.prototype.publish=function(e){this.metricsPublisher&&this.metricsPublisher(this,e)},e.prototype.reset=function(){this.metrics.timings=[],this.metrics.counters=[]},e.prototype.toQueryString=function(){return"sellerId="+this.merchantId+"&data="+encodeURIComponent(JSON.stringify(this.metrics))},e}(),P="merchantId";function x(){if(w)return w;var e=A();if(e){B=E(e);var t=m(e,P);w=new L(t);var n={name:D.SUB_PAGE_TYPE,value:D.CSS_BUTTON},a={name:D.PAGE_ACTION,value:D.HTML_BUTTON_RENDER},o=D.MERCHANT_DOMAIN_KEY+":"+window.location.host,r={name:D.ADDITIONAL_REQUEST_DATA,value:o};return w.addInfo(n),w.addInfo(a),w.addInfo(r),w}return null}function H(){var e,t,n;e=D.HTML_BUTTON_RENDER,t={name:e,tags:[D.HTML_BUTTON_RENDER_TAG]},(n=x())&&n.addCounter(t)}var M={apchsHost:"https://apay-us.amazon.com",defaultAuthUIHost:"https://apay-us.amazon.com",authUIHostByLang:{en_US:"https://apay-us.amazon.com",en_GB:"__en_GB_authUIHost__",it_IT:"__it_IT_authUIHost__",de_DE:"__de_DE_authUIHost__",es_ES:"__es_ES_authUIHost__",fr_FR:"__fr_FR_authUIHost__",ja_JP:"__ja_JP_authUIHost__"},microTextVersion:{it_it:"_CB1558571088_",de_de:"_CB1558571088_",es_es:"_CB1558571088_",fr_fr:"_CB1558571088_",en_us:"_CB1558571088_",en_gb:"_CB440556592_",ja_jp:"_CB1568869902_"},coe:{USD:"US",EUR:"DE",GBP:"UK",JPY:"JP"},regionCode:"01",allowedLedgerCurrencies:"USD",domainFallbackLanguage:"en_US",allowedCheckoutLanguages:"en_US",supportedBrowserLanguages:"en,en-us"},G={en:"en_US",fr:"fr_FR",it:"it_IT",es:"es_ES",de:"de_DE",ja:"ja_JP","en-us":"en_US","en-gb":"en_GB","fr-fr":"fr_FR","it-it":"it_IT","es-es":"es_ES","de-de":"de_DE","ja-jp":"ja_JP"};var k="amazon-pay-connectedAuth",j={CONNECTEDAUTH_GENERAL:"connectedAuth_general",LWA_GENERAL:"lwa_general"},X="language",z="apay-session-set",Y="isConnectedAuth",F="language",J="apst";function q(e,t,n){if(n){var a=document.createElement("input");a.type="hidden",a.name=t,a.value=n,e.appendChild(a)}}function K(e){var t=m(e,F);if("unknown"!==t)return t.replace("-","_");var n=function(){var e=navigator.languages;if(r(e)&&!r(navigator.language)&&(e=[navigator.language]),!r(e))for(var t=0;t<e.length;t++)if(M.supportedBrowserLanguages.split(",").indexOf(e[t].toLowerCase())>-1)return G[e[t].toLowerCase()];return null}();return n&&q(e,F,n.replace("_","-")),n}function Q(e,t){var n;if(n=t||A()){e(),a(k,j.CONNECTEDAUTH_GENERAL,1),q(n,Y,"true");var r=o(z);r&&q(n,J,r);var i=K(n);i&&a(X,i,1),b(w,B,h(B),g(B))}}var V=document.body;function W(e){Q(H,e)}W();return new MutationObserver(function(e){e.forEach(function(e){e.addedNodes.forEach(function(e){var t=A(e);t&&W(t)})})}).observe(V,{childList:!0,subtree:!0}),e.onAmazonPayFormReady=W,e}({});
